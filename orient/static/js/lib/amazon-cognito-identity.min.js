/*!
 * Copyright 2016 Amazon.com,
 * Inc. or its affiliates. All Rights Reserved.
 * 
 * Licensed under the Amazon Software License (the "License").
 * You may not use this file except in compliance with the
 * License. A copy of the License is located at
 * 
 *     http://aws.amazon.com/asl/
 * 
 * or in the "license" file accompanying this file. This file is
 * distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
 * CONDITIONS OF ANY KIND, express or implied. See the License
 * for the specific language governing permissions and
 * limitations under the License. 
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("aws-sdk/global"),require("aws-sdk/clients/cognitoidentityserviceprovider")):"function"==typeof define&&define.amd?define(["aws-sdk/global","aws-sdk/clients/cognitoidentityserviceprovider"],t):"object"==typeof exports?exports.AmazonCognitoIdentity=t(require("aws-sdk/global"),require("aws-sdk/clients/cognitoidentityserviceprovider")):e.AmazonCognitoIdentity=t(e.AWSCognito,e.AWSCognito.CognitoIdentityServiceProvider)}(this,function(e,t){return function(e){function t(i){if(n[i])return n[i].exports;var s=n[i]={exports:{},id:i,loaded:!1};return e[i].call(s.exports,s,s.exports,t),s.loaded=!0,s.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(15);Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})});var o=n(12),a=s(o),u=i(r);Object.keys(u).forEach(function(e){a.default[e]=u[e]}),"undefined"!=typeof window&&!window.crypto&&window.msCrypto&&(window.crypto=window.msCrypto)},function(t,n){t.exports=e},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i="t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in" i&&(i.writable="!0),Object.defineProperty(e,i.key,i)}}return" function(t,n,i){return="" n&&e(t.prototype,n),i&&e(t,i),t}}(),o="n(1),a=n(3),u=i(a),l="FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A93AD2CAFFFFFFFFFFFFFFFF",c="userAttributes.",h=function(){function" e(t){s(this,e),this.n="new" u.default(l,16),this.g="new" u.default("2",16),this.k="new" u.default(this.hexhash("00"+this.n.tostring(16)+"0"+this.g.tostring(16)),16),this.smallavalue="this.generateRandomSmallA(),this.largeAValue=this.calculateA(this.smallAValue),this.infoBits=new" o.util.buffer("caldera="" derived="" key","utf8"),this.poolname="t}return" r(e,[{key:"getsmallavalue",value:function(){return="" this.smallavalue}},{key:"getlargeavalue",value:function(){return="" this.largeavalue}},{key:"generaterandomsmalla",value:function(){var="" e="o.util.crypto.lib.randomBytes(128).toString("hex"),t=new" u.default(e,16),n="t.mod(this.N);return" n}},{key:"generaterandomstring",value:function(){return="" o.util.crypto.lib.randombytes(40).tostring("base64")}},{key:"getrandompassword",value:function(){return="" this.randompassword}},{key:"getsaltdevices",value:function(){return="" this.salttohashdevices}},{key:"getverifierdevices",value:function(){return="" this.verifierdevices}},{key:"generatehashdevice",value:function(e,t){this.randompassword="this.generateRandomString();var" n="" +e+t+":"+this.randompassword,i="this.hash(n),s=o.util.crypto.lib.randomBytes(16).toString("hex");this.SaltToHashDevices=this.padHex(new" u.default(s,16));var="" r="this.g.modPow(new" u.default(this.hexhash(this.salttohashdevices+i),16),this.n);this.verifierdevices="this.padHex(r)}},{key:"calculateA",value:function(e){var" t="this.g.modPow(e,this.N);if(t.mod(this.N).equals(u.default.ZERO))throw" new="" error("illegal="" paramater.="" a="" mod="" cannot="" be="" 0.");return="" t}},{key:"calculateu",value:function(e,t){this.uhexhash="this.hexHash(this.padHex(e)+this.padHex(t));var" u.default(this.uhexhash,16);return="" n}},{key:"hash",value:function(e){var="" array(64-t.length).join("0")+t}},{key:"hexhash",value:function(e){return="" this.hash(new="" o.util.buffer(e,"hex"))}},{key:"computehkdf",value:function(e,t){var="" o.util.buffer(string.fromcharcode(1),"utf8")]),s="o.util.crypto.hmac(n,i,"buffer","sha256");return" s.slice(0,16)}},{key:"getpasswordauthenticationkey",value:function(e,t,n,i){if(n.mod(this.n).equals(u.default.zero))throw="" error("b="" zero.");if(this.uvalue="this.calculateU(this.largeAValue,n),this.UValue.equals(u.default.ZERO))throw" error("u="" zero.");var="" s="" +this.poolname+e+":"+t,r="this.hash(s),a=new" u.default(this.hexhash(this.padhex(i)+r),16),l="this.g.modPow(a,this.N),c=n.subtract(this.k.multiply(l)),h=c.modPow(this.smallAValue.add(this.UValue.multiply(a)),this.N).mod(this.N),f=this.computehkdf(new" o.util.buffer(this.padhex(h),"hex"),new="" o.util.buffer(this.padhex(this.uvalue.tostring(16)),"hex"));return="" f}},{key:"getnewpasswordrequiredchallengeuserattributeprefix",value:function(){return="" c}},{key:"padhex",value:function(e){var="" t.length%2="==1?t="0"+t:"89ABCDEFabcdef".indexOf(t[0])!==-1&&(t="00"+t),t}}]),e}();t.default=h},function(e,t){"use" strict";function="" n(e,t){null!="e&&this.fromString(e,t)}function" i(){return="" n(null)}function="" s(e,t,n,i,s,r){for(;--r="">=0;){var o=t*this[e++]+n[i]+s;s=Math.floor(o/67108864),n[i++]=67108863&o}return s}function r(e){return J.charAt(e)}function o(e,t){var n=G[e.charCodeAt(t)];return null==n?-1:n}function a(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s}function u(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+this.dv:this.t=0}function 32="" l(e){var="" t="i();return" t.fromint(e),t}function="" c(e,t){var="" i;if(16="=t)i=4;else" if(8="=t)i=3;else" if(2="=t)i=1;else" if(32="=t)i=5;else{if(4!=t)throw" new="" error("only="" radix="" 2,="" 4,="" 8,="" 16,="" are="" supported");i="2}this.t=0,this.s=0;for(var" s="e.length,r=!1,a=0;--s">=0;){var u=o(e,s);u<0?"-"==e.charat(s)&&(r=!0):(r=!1,0==a?this[this.t++]=u:a+i>this.DB?(this[this.t-1]|=(u&(1<<this.db-a)-1)<<a,this[this.t++]=u>>this.DB-a):this[this.t-1]|=u<<a,a+=i,a>=this.DB&&(a-=this.DB))}this.clamp(),r&&n.ZERO.subTo(this,this)}function h(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t}function f(e){if(this.s<0)return"-"+this.negate().tostring();var 32="" t;if(16="=e)t=4;else" if(8="=e)t=3;else" if(2="=e)t=1;else" if(32="=e)t=5;else{if(4!=e)throw" new="" error("only="" radix="" 2,="" 4,="" 8,="" 16,="" are="" supported");t="2}var" n,i="(1<<t)-1,s=!1,o="",a=this.t,u=this.DB-a*this.DB%t;if(a--">0)for(u<this.db&&(n=this[a]>>u)>0&&(s=!0,o=r(n));a>=0;)u<t?(n=(this[a]&(1<<u)-1)<<t-u,n|=this[--a]>>(u+=this.DB-t)):(n=this[a]>>(u-=t)&i,u<=0&&(u+=this.db,--a)),n>0&&(s=!0),s&&(o+=r(n));return s?o:"0"}function d(){var e=i();return n.ZERO.subTo(this,e),e}function v(){return this.s<0?this.negate():this}function g(e){var="" t="this.s-e.s;if(0!=t)return" t;var="" n="this.t;if(t=n-e.t,0!=t)return" this.s<0?-t:t;for(;--n="">=0;)if(0!=(t=this[n]-e[n]))return t;return 0}function m(e){var t,n=1;return 0!=(t=e>>>16)&&(e=t,n+=16),0!=(t=e>>8)&&(e=t,n+=8),0!=(t=e>>4)&&(e=t,n+=4),0!=(t=e>>2)&&(e=t,n+=2),0!=(t=e>>1)&&(e=t,n+=1),n}function p(){return this.t<=0?0:this.db*(this.t-1)+m(this[this.t-1]^this.s&this.dm)}function y(e,t){var="" n;for(n="this.t-1;n">=0;--n)t[n+e]=this[n];for(n=e-1;n>=0;--n)t[n]=0;t.t=this.t+e,t.s=this.s}function S(e,t){for(var n=e;n<this.t;++n)t[n-e]=this[n];t.t=math.max(this.t-e,0),t.s=this.s}function c(e,t){var="" n,i="e%this.DB,s=this.DB-i,r=(1<<s)-1,o=Math.floor(e/this.DB),a=this.s<<i&this.DM;for(n=this.t-1;n">=0;--n)t[n+o+1]=this[n]>>s|a,a=(this[n]&r)<<i;for(n=o-1;n>=0;--n)t[n]=0;t[o]=a,t.t=this.t+o+1,t.s=this.s,t.clamp()}function w(e,t){t.s=this.s;var n=Math.floor(e/this.DB);if(n>=this.t)return void(t.t=0);var i=e%this.DB,s=this.DB-i,r=(1<<i)-1;t[0]=this[n]>>i;for(var o=n+1;o<this.t;++o)t[o-n-1]|=(this[o]&r)<<s,t[o-n]=this[o]>>i;i>0&&(t[this.t-n-1]|=(this.s&r)<<s),t.t=this.t-n,t.clamp()}function k(e,t){for(var="" n="0,i=0,s=Math.min(e.t,this.t);n<s;)i+=this[n]-e[n],t[n++]=i&this.DM,i">>=this.DB;if(e.t<this.t){for(i-=e.s;n<this.t;)i+=this[n],t[n++]=i&this.dm,i>>=this.DB;i+=this.s}else{for(i+=this.s;n<e.t;)i-=e[n],t[n++]=i&this.dm,i>>=this.DB;i-=e.s}t.s=i<0?-1:0,i<-1?t[n++]=this.dv+i:i>0&&(t[n++]=i),t.t=n,t.clamp()}function A(e,t){var i=this.abs(),s=e.abs(),r=i.t;for(t.t=r+s.t;--r>=0;)t[r]=0;for(r=0;r<s.t;++r)t[r+i.t]=i.am(0,s[r],t,r,0,i.t);t.s=0,t.clamp(),this.s!=e.s&&n.zero.subto(t,t)}function t(e){for(var="" t="this.abs(),n=e.t=2*t.t;--n">=0;)e[n]=0;for(n=0;n<t.t-1;++n){var i="t.am(n,t[n],e,2*n,0,1);(e[n+t.t]+=t.am(n+1,2*t[n],e,2*n+1,i,t.t-n-1))">=t.DV&&(e[n+t.t]-=t.DV,e[n+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(n,t[n],e,2*n,0,1)),e.s=0,e.clamp()}function U(e,t,s){var r=e.abs();if(!(r.t<=0)){var o="this.abs();if(o.t<r.t)return" null!="t&&t.fromInt(0),void(null!=s&&this.copyTo(s));null==s&&(s=i());var" a="i(),u=this.s,l=e.s,c=this.DB-m(r[r.t-1]);c">0?(r.lShiftTo(c,a),o.lShiftTo(c,s)):(r.copyTo(a),o.copyTo(s));var h=a.t,f=a[h-1];if(0!=f){var d=f*(1<<this.f1)+(h>1?a[h-2]>>this.F2:0),v=this.FV/d,g=(1<<this.f1) d,p="1<<this.F2,y=s.t,S=y-h,C=null==t?i():t;for(a.dlShiftTo(S,C),s.compareTo(C)">=0&&(s[s.t++]=1,s.subTo(C,s)),n.ONE.dlShiftTo(h,C),C.subTo(a,a);a.t<h;)a[a.t++]=0;for(;--s>=0;){var w=s[--y]==f?this.DM:Math.floor(s[y]*v+(s[y-1]+p)*g);if((s[y]+=a.am(0,w,s,S,0,h))<w)for(a.dlshiftto(s,c),s.subto(c,s);s[y]<--w;)s.subto(c,s)}null!=t&&(s.drshiftto(h,t),u!=l&&n.zero.subto(t,t)),s.t=h,s.clamp(),c>0&&s.rShiftTo(c,s),u<0&&n.zero.subto(s,s)}}}function e(e){var="" t="i();return" this.abs().divremto(e,null,t),this.s<0&&t.compareto(n.zero)="">0&&e.subTo(t,t),t}function D(){if(this.t<1)return 0;var="" e="this[0];if(0==(1&e))return" t="3&e;return">0?this.DV-t:-t}function I(e){return 0==this.compareTo(e)}function b(e,t){for(var n=0,i=0,s=Math.min(e.t,this.t);n<s;)i+=this[n]+e[n],t[n++]=i&this.dm,i>>=this.DB;if(e.t<this.t){for(i+=e.s;n<this.t;)i+=this[n],t[n++]=i&this.dm,i>>=this.DB;i+=this.s}else{for(i+=this.s;n<e.t;)i+=e[n],t[n++]=i&this.dm,i>>=this.DB;i+=e.s}t.s=i<0?-1:0,i>0?t[n++]=i:i<-1&&(t[n++]=this.dv+i),t.t=n,t.clamp()}function p(e){var="" t="i();return" this.addto(e,t),t}function="" r(e){var="" this.subto(e,t),t}function="" f(e){var="" this.multiplyto(e,t),t}function="" _(e){var="" this.divremto(e,t,null),t}function="" b(e){this.m="e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp">>15,this.um=(1<<e.db-15)-1,this.mt2=2*e.t}function o(e){var="" t="i();return" e.abs().dlshiftto(this.m.t,t),t.divremto(this.m,null,t),e.s<0&&t.compareto(n.zero)="">0&&this.m.subTo(t,t),t}function M(e){var t=i();return e.copyTo(t),this.reduce(t),t}function N(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t="0;t<this.m.t;++t){var" n="32767&e[t],i=n*this.mpl+((n*this.mph+(e[t]">>15)*this.mpl&this.um)<<15)&e.dm;for(n=t+this.m.t,e[n]+=this.m.am(0,i,e,t,0,this.m.t);e[n]>=e.DV;)e[n]-=e.DV,e[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)}function V(e,t){e.squareTo(t),this.reduce(t)}function K(e,t,n){e.multiplyTo(t,n),this.reduce(n)}function q(e,t){var n,s=e.bitLength(),r=l(1),o=new B(t);if(s<=0)return r;n="s<18?1:s<48?3:s<144?4:s<768?5:6;var" a="new" array,u="3,c=n-1,h=(1<<n)-1;if(a[1]=o.convert(this),n">1){var f=i();for(o.sqrTo(a[1],f);u<=h;)a[u]=i(),o.multo(f,a[u-2],a[u]),u+=2}var d,v,g="e.t-1,p=!0,y=i();for(s=m(e[g])-1;g">=0;){for(s>=c?d=e[g]>>s-c&h:(d=(e[g]&(1<<s+1)-1)<<c-s,g>0&&(d|=e[g-1]>>this.DB+s-c)),u=n;0==(1&d);)d>>=1,--u;if((s-=u)<0&&(s+=this.db,--g),p)a[d].copyto(r),p=!1;else{for(;u>1;)o.sqrTo(r,y),o.sqrTo(y,r),u-=2;u>0?o.sqrTo(r,y):(v=r,r=y,y=v),o.mulTo(y,a[d],r)}for(;g>=0&&0==(e[g]&1<<s);)o.sqrto(r,y),v=r,r=y,y=v,--s<0&&(s=this.db-1,--g)}return o.revert(r)}object.defineproperty(t,"__esmodule",{value:!0}),t.default="n,n.prototype.am=s;var" j="26;n.prototype.DB=j,n.prototype.DM=(1<<j)-1,n.prototype.DV=1<<j;var" x="52;n.prototype.FV=Math.pow(2,x),n.prototype.F1=x-j,n.prototype.F2=2*j-x;var" h,l,j="0123456789abcdefghijklmnopqrstuvwxyz" ,g="new" array;for(h="0" .charcodeat(0),l="0;L<=9;++L)G[H++]=L;for(H="a".charCodeAt(0),L=10;L<36;++L)G[H++]=L;for(H="A".charCodeAt(0),L=10;L<36;++L)G[H++]=L;B.prototype.convert=O,B.prototype.revert=M,B.prototype.reduce=N,B.prototype.mulTo=K,B.prototype.sqrTo=V,n.prototype.copyTo=a,n.prototype.fromInt=u,n.prototype.fromString=c,n.prototype.clamp=h,n.prototype.dlShiftTo=y,n.prototype.drShiftTo=S,n.prototype.lShiftTo=C,n.prototype.rShiftTo=w,n.prototype.subTo=k,n.prototype.multiplyTo=A,n.prototype.squareTo=T,n.prototype.divRemTo=U,n.prototype.invDigit=D,n.prototype.addTo=b,n.prototype.toString=f,n.prototype.negate=d,n.prototype.abs=v,n.prototype.compareTo=g,n.prototype.bitLength=p,n.prototype.mod=E,n.prototype.equals=I,n.prototype.add=P,n.prototype.subtract=R,n.prototype.multiply=F,n.prototype.divide=_,n.prototype.modPow=q,n.ZERO=l(0),n.ONE=l(1)},function(e,t,n){"use" strict";function="" i(e,t){if(!(e="" instanceof="" t))throw="" new="" typeerror("cannot="" call="" a="" class="" as="" function")}object.defineproperty(t,"__esmodule",{value:!0});var="" s="function(){function" e(e,t){for(var="" n="0;n<t.length;n++){var" i="t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in" i&&(i.writable="!0),Object.defineProperty(e,i.key,i)}}return" function(t,n,i){return="" n&&e(t.prototype,n),i&&e(t,i),t}}(),r="n(1),o=function(){function" e(){var="" t="arguments.length">0&&void 0!==arguments[0]?arguments[0]:{},n=t.AccessToken;i(this,e),this.jwtToken=n||""}return s(e,[{key:"getJwtToken",value:function(){return this.jwtToken}},{key:"getExpiration",value:function(){var e=this.jwtToken.split(".")[1],t=JSON.parse(r.util.base64.decode(e).toString("utf8"));return t.exp}}]),e}();t.default=o},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i="t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in" i&&(i.writable="!0),Object.defineProperty(e,i.key,i)}}return" function(t,n,i){return="" n&&e(t.prototype,n),i&&e(t,i),t}}(),r="n(1),o=function(){function" e(){var="" t="arguments.length">0&&void 0!==arguments[0]?arguments[0]:{},n=t.IdToken;i(this,e),this.jwtToken=n||""}return s(e,[{key:"getJwtToken",value:function(){return this.jwtToken}},{key:"getExpiration",value:function(){var e=this.jwtToken.split(".")[1],t=JSON.parse(r.util.base64.decode(e).toString("utf8"));return t.exp}}]),e}();t.default=o},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i="t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in" i&&(i.writable="!0),Object.defineProperty(e,i.key,i)}}return" function(t,n,i){return="" n&&e(t.prototype,n),i&&e(t,i),t}}(),s="function(){function" e(){var="" t="arguments.length">0&&void 0!==arguments[0]?arguments[0]:{},i=t.RefreshToken;n(this,e),this.token=i||""}return i(e,[{key:"getToken",value:function(){return this.token}}]),e}();t.default=s},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i="t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in" i&&(i.writable="!0),Object.defineProperty(e,i.key,i)}}return" function(t,n,i){return="" n&&e(t.prototype,n),i&&e(t,i),t}}(),o="n(1),a=n(3),u=i(a),l=n(2),c=i(l),h=n(4),f=i(h),d=n(5),v=i(d),g=n(6),m=i(g),p=n(9),y=i(p),S=n(10),C=i(S),w=n(8),k=i(w),A=n(11),T=i(A),U=function(){function" e(t){if(s(this,e),null="=t||null==t.Username||null==t.Pool)throw" new="" error("username="" and="" pool="" information="" are="" required.");this.username="t.Username||"",this.pool=t.Pool,this.Session=null,this.client=t.Pool.client,this.signInUserSession=null,this.authenticationFlowType="USER_SRP_AUTH",this.storage=(new" t.default).getstorage()}return="" r(e,[{key:"getsigninusersession",value:function(){return="" this.signinusersession}},{key:"getusername",value:function(){return="" this.username}},{key:"getauthenticationflowtype",value:function(){return="" this.authenticationflowtype}},{key:"setauthenticationflowtype",value:function(e){this.authenticationflowtype="e}},{key:"authenticateUser",value:function(e,t){var" n="this,i=new" c.default(this.pool.getuserpoolid().split("_")[1]),s="new" c.default,r="void" 0,a="void" 0,l="{};null!=this.deviceKey&&(l.DEVICE_KEY=this.deviceKey),l.USERNAME=this.username,l.SRP_A=i.getLargeAValue().toString(16),"CUSTOM_AUTH"===this.authenticationFlowType&&(l.CHALLENGE_NAME="SRP_A"),this.client.makeUnauthenticatedRequest("initiateAuth",{AuthFlow:this.authenticationFlowType,ClientId:this.pool.getClientId(),AuthParameters:l,ClientMetadata:e.getValidationData()},function(l,c){if(l)return" t.onfailure(l);var="" h="c.ChallengeParameters;n.username=h.USER_ID_FOR_SRP,r=new" u.default(h.srp_b,16),a="new" u.default(h.salt,16),n.getcacheddevicekeyandpassword();var="" f="i.getPasswordAuthenticationKey(n.username,e.getPassword(),r,a),d=s.getNowString(),v=o.util.crypto.hmac(f,o.util.buffer.concat([new" o.util.buffer(n.pool.getuserpoolid().split("_")[1],"utf8"),new="" o.util.buffer(n.username,"utf8"),new="" o.util.buffer(h.secret_block,"base64"),new="" o.util.buffer(d,"utf8")]),"base64","sha256"),g="{};g.USERNAME=n.username,g.PASSWORD_CLAIM_SECRET_BLOCK=h.SECRET_BLOCK,g.TIMESTAMP=d,g.PASSWORD_CLAIM_SIGNATURE=v,null!=n.deviceKey&&(g.DEVICE_KEY=n.deviceKey);var" m="function" e(t,i){return="" n.client.makeunauthenticatedrequest("respondtoauthchallenge",t,function(s,r){return="" s&&"resourcenotfoundexception"="==s.code&&s.message.toLowerCase().indexOf("device")!==-1?(g.DEVICE_KEY=null,n.deviceKey=null,n.randomPassword=null,n.deviceGroupKey=null,n.clearCachedDeviceKeyAndPassword(),e(t,i)):i(s,r)})};m({ChallengeName:"PASSWORD_VERIFIER",ClientId:n.pool.getClientId(),ChallengeResponses:g,Session:c.Session},function(e,s){if(e)return" t.onfailure(e);var="" r="s.ChallengeName;if("NEW_PASSWORD_REQUIRED"===r){n.Session=s.Session;var" o="null,a=null,u=[],l=i.getNewPasswordRequiredChallengeUserAttributePrefix();if(s.ChallengeParameters&&(o=JSON.parse(s.ChallengeParameters.userAttributes),a=JSON.parse(s.ChallengeParameters.requiredAttributes)),a)for(var" c="0;c<a.length;c++)u[c]=a[c].substr(l.length);return" t.newpasswordrequired(o,u)}return="" n.authenticateuserinternal(s,i,t)})})}},{key:"authenticateuserinternal",value:function(e,t,n){var="" this.session="e.Session,n.mfaRequired(s,r);if("CUSTOM_CHALLENGE"===s)return" void="" this.getdeviceresponse(n);this.signinusersession="this.getCognitoUserSession(e.AuthenticationResult),this.cacheTokens();var" a="e.AuthenticationResult.NewDeviceMetadata;if(null==a)return" n.onsuccess(this.signinusersession);t.generatehashdevice(e.authenticationresult.newdevicemetadata.devicegroupkey,e.authenticationresult.newdevicemetadata.devicekey);var="" u="{Salt:new" o.util.buffer(t.getsaltdevices(),"hex").tostring("base64"),passwordverifier:new="" o.util.buffer(t.getverifierdevices(),"hex").tostring("base64")};this.verifierdevices="u.PasswordVerifier,this.deviceGroupKey=a.DeviceGroupKey,this.randomPassword=t.getRandomPassword(),this.client.makeUnauthenticatedRequest("confirmDevice",{DeviceKey:a.DeviceKey,AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceSecretVerifierConfig:u,DeviceName:navigator.userAgent},function(t,s){return" t?n.onfailure(t):(i.devicekey="e.AuthenticationResult.NewDeviceMetadata.DeviceKey,i.cacheDeviceKeyAndPassword(),s.UserConfirmationNecessary===!0?n.onSuccess(i.signInUserSession,s.UserConfirmationNecessary):n.onSuccess(i.signInUserSession))})}},{key:"completeNewPasswordChallenge",value:function(e,t,n){var" n.onfailure(new="" error("new="" password="" is="" required."));var="" s="new" c.default(this.pool.getuserpoolid().split("_")[1]),r="s.getNewPasswordRequiredChallengeUserAttributePrefix(),o={};t&&Object.keys(t).forEach(function(e){o[r+e]=t[e]}),o.NEW_PASSWORD=e,o.USERNAME=this.username,this.client.makeUnauthenticatedRequest("respondToAuthChallenge",{ChallengeName:"NEW_PASSWORD_REQUIRED",ClientId:this.pool.getClientId(),ChallengeResponses:o,Session:this.Session},function(e,t){return" e?n.onfailure(e):i.authenticateuserinternal(t,s,n)})}},{key:"getdeviceresponse",value:function(e){var="" t="this,n=new" c.default(this.devicegroupkey),i="new" c.default,s="{};s.USERNAME=this.username,s.DEVICE_KEY=this.deviceKey,s.SRP_A=n.getLargeAValue().toString(16),this.client.makeUnauthenticatedRequest("respondToAuthChallenge",{ChallengeName:"DEVICE_SRP_AUTH",ClientId:this.pool.getClientId(),ChallengeResponses:s},function(s,r){if(s)return" e.onfailure(s);var="" u.default(a.srp_b,16),c="new" u.default(a.salt,16),h="n.getPasswordAuthenticationKey(t.deviceKey,t.randomPassword,l,c),f=i.getNowString(),d=o.util.crypto.hmac(h,o.util.buffer.concat([new" o.util.buffer(t.devicegroupkey,"utf8"),new="" o.util.buffer(t.devicekey,"utf8"),new="" o.util.buffer(a.secret_block,"base64"),new="" o.util.buffer(f,"utf8")]),"base64","sha256"),v="{};v.USERNAME=t.username,v.PASSWORD_CLAIM_SECRET_BLOCK=a.SECRET_BLOCK,v.TIMESTAMP=f,v.PASSWORD_CLAIM_SIGNATURE=d,v.DEVICE_KEY=t.deviceKey,t.client.makeUnauthenticatedRequest("respondToAuthChallenge",{ChallengeName:"DEVICE_PASSWORD_VERIFIER",ClientId:t.pool.getClientId(),ChallengeResponses:v,Session:r.Session},function(n,i){return" n?e.onfailure(n):(t.signinusersession="t.getCognitoUserSession(i.AuthenticationResult),t.cacheTokens(),e.onSuccess(t.signInUserSession))})})}},{key:"confirmRegistration",value:function(e,t,n){this.client.makeUnauthenticatedRequest("confirmSignUp",{ClientId:this.pool.getClientId(),ConfirmationCode:e,Username:this.username,ForceAliasCreation:t},function(e){return" e?n(e,null):n(null,"success")})}},{key:"sendcustomchallengeanswer",value:function(e,t){var="" n.getdeviceresponse(t);if(n.signinusersession="n.getCognitoUserSession(i.AuthenticationResult),n.cacheTokens(),null==i.AuthenticationResult.NewDeviceMetadata)return" t.onsuccess(n.signinusersession);var="" c.default(n.pool.getuserpoolid().split("_")[1]);r.generatehashdevice(i.authenticationresult.newdevicemetadata.devicegroupkey,i.authenticationresult.newdevicemetadata.devicekey);var="" o.util.buffer(r.getsaltdevices(),"hex").tostring("base64"),passwordverifier:new="" o.util.buffer(r.getverifierdevices(),"hex").tostring("base64")};n.verifierdevices="a.PasswordVerifier,n.deviceGroupKey=i.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,n.randomPassword=r.getRandomPassword(),n.client.makeUnauthenticatedRequest("confirmDevice",{DeviceKey:i.AuthenticationResult.NewDeviceMetadata.DeviceKey,AccessToken:n.signInUserSession.getAccessToken().getJwtToken(),DeviceSecretVerifierConfig:a,DeviceName:navigator.userAgent},function(e,s){return" e?t.onfailure(e):(n.devicekey="i.AuthenticationResult.NewDeviceMetadata.DeviceKey,n.cacheDeviceKeyAndPassword(),s.UserConfirmationNecessary===!0?t.onSuccess(n.signInUserSession,s.UserConfirmationNecessary):t.onSuccess(n.signInUserSession))})})}},{key:"changePassword",value:function(e,t,n){return" null!="this.signInUserSession&&this.signInUserSession.isValid()?void" this.client.makeunauthenticatedrequest("changepassword",{previouspassword:e,proposedpassword:t,accesstoken:this.signinusersession.getaccesstoken().getjwttoken()},function(e){return="" e?n(e,null):n(null,"success")}):n(new="" error("user="" not="" authenticated"),null)}},{key:"enablemfa",value:function(e){if(null="=this.signInUserSession||!this.signInUserSession.isValid())return" e(new="" authenticated"),null);var="" t?e(t,null):e(null,"success")})}},{key:"disablemfa",value:function(e){if(null="=this.signInUserSession||!this.signInUserSession.isValid())return" t?e(t,null):e(null,"success")})}},{key:"deleteuser",value:function(e){var="" this.client.makeunauthenticatedrequest("deleteuser",{accesstoken:this.signinusersession.getaccesstoken().getjwttoken()},function(n){return="" n?e(n,null):(t.clearcachedtokens(),e(null,"success"))}):e(new="" authenticated"),null)}},{key:"updateattributes",value:function(e,t){return="" this.client.makeunauthenticatedrequest("updateuserattributes",{accesstoken:this.signinusersession.getaccesstoken().getjwttoken(),userattributes:e},function(e){return="" e?t(e,null):t(null,"success")}):t(new="" authenticated"),null)}},{key:"getuserattributes",value:function(e){return="" this.client.makeunauthenticatedrequest("getuser",{accesstoken:this.signinusersession.getaccesstoken().getjwttoken()},function(t,n){if(t)return="" e(t,null);for(var="" k.default(r);i.push(o)}return="" e(null,i)}):e(new="" authenticated"),null)}},{key:"getmfaoptions",value:function(e){return="" this.client.makeunauthenticatedrequest("getuser",{accesstoken:this.signinusersession.getaccesstoken().getjwttoken()},function(t,n){return="" t?e(t,null):e(null,n.mfaoptions)}):e(new="" authenticated"),null)}},{key:"deleteattributes",value:function(e,t){return="" this.client.makeunauthenticatedrequest("deleteuserattributes",{userattributenames:e,accesstoken:this.signinusersession.getaccesstoken().getjwttoken()},function(e){return="" authenticated"),null)}},{key:"resendconfirmationcode",value:function(e){this.client.makeunauthenticatedrequest("resendconfirmationcode",{clientid:this.pool.getclientid(),username:this.username},function(t){return="" t?e(t,null):e(null,"success")})}},{key:"getsession",value:function(e){if(null="=this.username)return" null.="" cannot="" retrieve="" session"),null);if(null!="this.signInUserSession&&this.signInUserSession.isValid())return" e(null,this.signinusersession);var="" +this.pool.getclientid()+"."+this.username,n="t+".idToken",i=t+".accessToken",s=t+".refreshToken";if(this.storage.getItem(n)){var" v.default({idtoken:this.storage.getitem(n)}),o="new" f.default({accesstoken:this.storage.getitem(i)}),a="new" m.default({refreshtoken:this.storage.getitem(s)}),u="{IdToken:r,AccessToken:o,RefreshToken:a},l=new" y.default(u);if(l.isvalid())return="" this.signinusersession="l,e(null,this.signInUserSession);if(null==a.getToken())return" error("cannot="" session.="" please="" authenticate."),null);this.refreshsession(a,e)}else="" error("local="" storage="" missing="" an="" id="" token,="" authenticate"),null)}},{key:"refreshsession",value:function(e,t){var="" +this.pool.getclientid(),r="s+".LastAuthUser";if(this.storage.getItem(r)){this.username=this.storage.getItem(r);var" object.prototype.hasownproperty.call(r,"refreshtoken")||(r.refreshtoken="e.getToken()),n.signInUserSession=n.getCognitoUserSession(r),n.cacheTokens(),t(null,n.signInUserSession)}})}},{key:"cacheTokens",value:function(){var" e="CognitoIdentityServiceProvider." +this.pool.getclientid(),t="e+"."+this.username+".idToken",n=e+"."+this.username+".accessToken",i=e+"."+this.username+".refreshToken",s=e+".LastAuthUser";this.storage.setItem(t,this.signInUserSession.getIdToken().getJwtToken()),this.storage.setItem(n,this.signInUserSession.getAccessToken().getJwtToken()),this.storage.setItem(i,this.signInUserSession.getRefreshToken().getToken()),this.storage.setItem(s,this.username)}},{key:"cacheDeviceKeyAndPassword",value:function(){var" +this.pool.getclientid()+"."+this.username,t="e+".deviceKey",n=e+".randomPasswordKey",i=e+".deviceGroupKey";this.storage.setItem(t,this.deviceKey),this.storage.setItem(n,this.randomPassword),this.storage.setItem(i,this.deviceGroupKey)}},{key:"getCachedDeviceKeyAndPassword",value:function(){var" v.default(e),n="new" f.default(e),i="new" m.default(e),s="{IdToken:t,AccessToken:n,RefreshToken:i};return" y.default(s)}},{key:"forgotpassword",value:function(e){this.client.makeunauthenticatedrequest("forgotpassword",{clientid:this.pool.getclientid(),username:this.username},function(t,n){return="" t?e.onfailure(t):"function"="=typeof" e.inputverificationcode?e.inputverificationcode(n):e.onsuccess()})}},{key:"confirmpassword",value:function(e,t,n){this.client.makeunauthenticatedrequest("confirmforgotpassword",{clientid:this.pool.getclientid(),="" username:this.username,confirmationcode:e,password:t},function(e){return="" e?n.onfailure(e):n.onsuccess()})}},{key:"getattributeverificationcode",value:function(e,t){return="" this.client.makeunauthenticatedrequest("getuserattributeverificationcode",{attributename:e,accesstoken:this.signinusersession.getaccesstoken().getjwttoken()},function(e,n){return="" e?t.onfailure(e):t.inputverificationcode(n)}):t.onfailure(new="" authenticated"))}},{key:"verifyattribute",value:function(e,t,n){return="" this.client.makeunauthenticatedrequest("verifyuserattribute",{attributename:e,code:t,accesstoken:this.signinusersession.getaccesstoken().getjwttoken()},function(e){return="" e?n.onfailure(e):n.onsuccess("success")}):n.onfailure(new="" authenticated"))}},{key:"getdevice",value:function(e){return="" this.client.makeunauthenticatedrequest("getdevice",{accesstoken:this.signinusersession.getaccesstoken().getjwttoken(),devicekey:this.devicekey},function(t,n){return="" t?e.onfailure(t):e.onsuccess(n)}):e.onfailure(new="" authenticated"))}},{key:"forgetspecificdevice",value:function(e,t){return="" this.client.makeunauthenticatedrequest("forgetdevice",{accesstoken:this.signinusersession.getaccesstoken().getjwttoken(),devicekey:e},function(e){return="" e?t.onfailure(e):t.onsuccess("success")}):t.onfailure(new="" authenticated"))}},{key:"forgetdevice",value:function(e){var="" t.devicekey="null,t.deviceGroupKey=null,t.randomPassword=null,t.clearCachedDeviceKeyAndPassword(),e.onSuccess(n)}})}},{key:"setDeviceStatusRemembered",value:function(e){return" this.client.makeunauthenticatedrequest("updatedevicestatus",{accesstoken:this.signinusersession.getaccesstoken().getjwttoken(),devicekey:this.devicekey,devicerememberedstatus:"remembered"},function(t){return="" t?e.onfailure(t):e.onsuccess("success")}):e.onfailure(new="" authenticated"))}},{key:"setdevicestatusnotremembered",value:function(e){return="" this.client.makeunauthenticatedrequest("updatedevicestatus",{accesstoken:this.signinusersession.getaccesstoken().getjwttoken(),devicekey:this.devicekey,devicerememberedstatus:"not_remembered"},function(t){return="" authenticated"))}},{key:"listdevices",value:function(e,t,n){return="" this.client.makeunauthenticatedrequest("listdevices",{accesstoken:this.signinusersession.getaccesstoken().getjwttoken(),limit:e,paginationtoken:t},function(e,t){return="" e?n.onfailure(e):n.onsuccess(t)}):n.onfailure(new="" authenticated"))}},{key:"globalsignout",value:function(e){var="" this.client.makeunauthenticatedrequest("globalsignout",{accesstoken:this.signinusersession.getaccesstoken().getjwttoken()},function(n){return="" n?e.onfailure(n):(t.clearcachedtokens(),e.onsuccess("success"))}):e.onfailure(new="" authenticated"))}},{key:"signout",value:function(){this.signinusersession="null,this.clearCachedTokens()}}]),e}();t.default=U},function(e,t){"use" strict";function="" n(e,t){if(!(e="" instanceof="" t))throw="" typeerror("cannot="" call="" class="" as="" function")}object.defineproperty(t,"__esmodule",{value:!0});var="" e(e,t){for(var="" n&&e(t.prototype,n),i&&e(t,i),t}}(),s="function(){function" e(){var="">0&&void 0!==arguments[0]?arguments[0]:{},i=t.Name,s=t.Value;n(this,e),this.Name=i||"",this.Value=s||""}return i(e,[{key:"getValue",value:function(){return this.Value}},{key:"setValue",value:function(e){return this.Value=e,this}},{key:"getName",value:function(){return this.Name}},{key:"setName",value:function(e){return this.Name=e,this}},{key:"toString",value:function(){return JSON.stringify(this)}},{key:"toJSON",value:function(){return{Name:this.Name,Value:this.Value}}}]),e}();t.default=s},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i="t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in" i&&(i.writable="!0),Object.defineProperty(e,i.key,i)}}return" function(t,n,i){return="" n&&e(t.prototype,n),i&&e(t,i),t}}(),s="function(){function" e(){var="" t="arguments.length">0&&void 0!==arguments[0]?arguments[0]:{},i=t.IdToken,s=t.RefreshToken,r=t.AccessToken;if(n(this,e),null==r||null==i)throw new Error("Id token and Access Token must be present.");this.idToken=i,this.refreshToken=s,this.accessToken=r}return i(e,[{key:"getIdToken",value:function(){return this.idToken}},{key:"getRefreshToken",value:function(){return this.refreshToken}},{key:"getAccessToken",value:function(){return this.accessToken}},{key:"isValid",value:function(){var e=Math.floor(new Date/1e3);return e</t.length;n++){var></t.length;n++){var></t.length;n++){var></t.length;n++){var></s);)o.sqrto(r,y),v=r,r=y,y=v,--s<0&&(s=this.db-1,--g)}return></0&&(s+=this.db,--g),p)a[d].copyto(r),p=!1;else{for(;u></s+1)-1)<<c-s,g></=h;)a[u]=i(),o.multo(f,a[u-2],a[u]),u+=2}var></=0)return></15)&e.dm;for(n=t+this.m.t,e[n]+=this.m.am(0,i,e,t,0,this.m.t);e[n]></=this.mt2;)e[e.t++]=0;for(var></e.db-15)-1,this.mt2=2*e.t}function></-1&&(t[n++]=this.dv+i),t.t=n,t.clamp()}function></0?-1:0,i></e.t;)i+=e[n],t[n++]=i&this.dm,i></this.t){for(i+=e.s;n<this.t;)i+=this[n],t[n++]=i&this.dm,i></s;)i+=this[n]+e[n],t[n++]=i&this.dm,i></1)return></0&&n.zero.subto(s,s)}}}function></w)for(a.dlshiftto(s,c),s.subto(c,s);s[y]<--w;)s.subto(c,s)}null!=t&&(s.drshiftto(h,t),u!=l&&n.zero.subto(t,t)),s.t=h,s.clamp(),c></h;)a[a.t++]=0;for(;--s></this.f1)></this.f1)+(h></=0)){var></t.t-1;++n){var></s.t;++r)t[r+i.t]=i.am(0,s[r],t,r,0,i.t);t.s=0,t.clamp(),this.s!=e.s&&n.zero.subto(t,t)}function></0?-1:0,i<-1?t[n++]=this.dv+i:i></e.t;)i-=e[n],t[n++]=i&this.dm,i></this.t){for(i-=e.s;n<this.t;)i+=this[n],t[n++]=i&this.dm,i></s),t.t=this.t-n,t.clamp()}function></this.t;++o)t[o-n-1]|=(this[o]&r)<<s,t[o-n]=this[o]></i)-1;t[0]=this[n]></i;for(n=o-1;n></this.t;++n)t[n-e]=this[n];t.t=math.max(this.t-e,0),t.s=this.s}function></=0?0:this.db*(this.t-1)+m(this[this.t-1]^this.s&this.dm)}function></0?this.negate():this}function></=0&&(u+=this.db,--a)),n></t?(n=(this[a]&(1<<u)-1)<<t-u,n|=this[--a]></this.db&&(n=this[a]></0)return"-"+this.negate().tostring();var></a,a+=i,a></this.db-a)-1)<<a,this[this.t++]=u></0?"-"==e.charat(s)&&(r=!0):(r=!1,0==a?this[this.t++]=u:a+i></-1?this[0]=e+this.dv:this.t=0}function></0?-1:0,e></t.length;n++){var>